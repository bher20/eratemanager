image:
  repository: ghcr.io/bher20/eratemanager
  tag: latest
  pullPolicy: IfNotPresent

replicaCount: 1

db:
  # Default sqlite settings; override to use Postgres.
  driver: "sqlite"
  dsn: "eratemanager.db"

cronWorker:
  enabled: false
  # Interval in seconds between batch refresh runs.
  intervalSeconds: 3600
  replicaCount: 1
  resources: {}
  autoscaling:
    enabled: false
    minReplicas: 1
    maxReplicas: 3
    targetCPUUtilizationPercentage: 80


service:
  type: ClusterIP
  port: 80

app:
  port: 8000

providers:
  - key: cemc
  - key: nes

persistence:
  enabled: true
  size: 1Gi
  mountPath: /data

cron:
  schedule: "0 3 * * *"

gateway:
  enabled: true
  name: public-gateway
  namespace: default
  hostname: rates.example.com

monitoring:
  enabled: true
  serviceMonitor:
    enabled: true
    namespace: ""
    interval: 30s
    scrapeTimeout: 10s
    labels: {}

hpa:
  enabled: false
  minReplicas: 1
  maxReplicas: 5
  targetCPUUtilizationPercentage: 80
  targetMemoryUtilizationPercentage: null

imagePullSecrets: []

batch:
  enabled: true
  schedule: "0 * * * *"    # every hour
  intervalSeconds: 3600    # worker inside container runs every hour too

# auto-generated DSN using PostgreSQL chart:
dbPostgresURL: >-
  postgres://{{ .Values.postgresql.auth.username }}:{{ .Values.postgresql.auth.password }}
  @{{ include "eratemanager.fullname" . }}-postgresql:5432/
  {{ .Values.postgresql.auth.database }}?sslmode=disable